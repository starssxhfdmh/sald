{
	"$schema": "https://raw.githubusercontent.com/martinring/tmlanguage/master/tmlanguage.json",
	"name": "Sald",
	"scopeName": "source.sald",
	"patterns": [
		{ "include": "#comments" },
		{ "include": "#format-strings" },
		{ "include": "#strings" },
		{ "include": "#numbers" },
		{ "include": "#keywords" },
		{ "include": "#storage" },
		{ "include": "#constants" },
		{ "include": "#builtins" },
		{ "include": "#functions" },
		{ "include": "#classes" },
		{ "include": "#operators" },
		{ "include": "#punctuation" },
		{ "include": "#identifiers" }
	],
	"repository": {
		"comments": {
			"patterns": [
				{ "name": "comment.line.double-slash.sald", "match": "//.*$" },
				{ "name": "comment.block.sald", "begin": "/\\*", "end": "\\*/" }
			]
		},
		"format-strings": {
			"patterns": [
				{
					"comment": "Interpolated triple double-quote string",
					"name": "meta.string.interpolated.triple.sald",
					"begin": "(\\$)(\"\"\")",
					"beginCaptures": {
						"1": { "name": "punctuation.definition.string.template.sald" },
						"2": { "name": "punctuation.definition.string.begin.sald" }
					},
					"end": "(\"\"\")",
					"endCaptures": {
						"1": { "name": "punctuation.definition.string.end.sald" }
					},
					"patterns": [
						{ "include": "#interpolation-block" },
						{ "include": "#string-escapes" },
						{ "name": "string.quoted.other.sald", "match": "[^{\\\\]+" },
						{ "name": "string.quoted.other.sald", "match": "." }
					]
				},
				{
					"comment": "Interpolated double-quote string",
					"name": "meta.string.interpolated.double.sald",
					"begin": "(\\$)(\")",
					"beginCaptures": {
						"1": { "name": "punctuation.definition.string.template.sald" },
						"2": { "name": "punctuation.definition.string.begin.sald" }
					},
					"end": "(\")",
					"endCaptures": {
						"1": { "name": "punctuation.definition.string.end.sald" }
					},
					"patterns": [
						{ "include": "#interpolation-block" },
						{ "include": "#string-escapes" },
						{ "name": "string.quoted.double.sald", "match": "[^{\"\\\\]+" }
					]
				},
				{
					"comment": "Interpolated single-quote string",
					"name": "meta.string.interpolated.single.sald",
					"begin": "(\\$)(')",
					"beginCaptures": {
						"1": { "name": "punctuation.definition.string.template.sald" },
						"2": { "name": "punctuation.definition.string.begin.sald" }
					},
					"end": "(')",
					"endCaptures": {
						"1": { "name": "punctuation.definition.string.end.sald" }
					},
					"patterns": [
						{ "include": "#interpolation-block" },
						{ "include": "#string-escapes" },
						{ "name": "string.quoted.single.sald", "match": "[^{'\\\\]+" }
					]
				}
			]
		},
		"interpolation-block": {
			"comment": "Captured expression block { ... }",
			"begin": "\\{",
			"beginCaptures": {
				"0": { "name": "punctuation.section.embedded.begin.sald" }
			},
			"end": "\\}",
			"endCaptures": {
				"0": { "name": "punctuation.section.embedded.end.sald" }
			},
			"contentName": "source.sald",
			"patterns": [
				{ "include": "source.sald" }
			]
		},
		"strings": {
			"patterns": [
				{ "name": "string.quoted.triple.sald", "begin": "\"\"\"", "end": "\"\"\"", "patterns": [{ "include": "#string-escapes" }] },
				{ "name": "string.quoted.double.sald", "begin": "\"", "end": "\"", "patterns": [{ "include": "#string-escapes" }] },
				{ "name": "string.quoted.single.sald", "begin": "'", "end": "'", "patterns": [{ "include": "#string-escapes" }] }
			]
		},
		"string-escapes": {
			"patterns": [
				{ "name": "constant.character.escape.sald", "match": "\\\\(?:[nrtbfv0\\\\\"']|x[0-9a-fA-F]{2}|u[0-9a-fA-F]{4}|u\\{[0-9a-fA-F]{1,6}\\})" }
			]
		},
		"numbers": {
			"patterns": [
				{ "name": "constant.numeric.hex.sald", "match": "\\b0[xX][0-9a-fA-F]+\\b" },
				{ "name": "constant.numeric.binary.sald", "match": "\\b0[bB][01]+\\b" },
				{ "name": "constant.numeric.float.sald", "match": "\\b[0-9]+\\.[0-9]+([eE][+-]?[0-9]+)?\\b" },
				{ "name": "constant.numeric.integer.sald", "match": "\\b[0-9]+\\b" }
			]
		},
		"keywords": {
			"patterns": [
				{ "name": "keyword.control.sald", "match": "\\b(if|else|while|for|in|do|switch|default|return|break|continue|try|catch|throw|await|async)\\b" },
				{ "name": "keyword.other.sald", "match": "\\b(import|as|extends|super)\\b" }
			]
		},
		"storage": {
			"patterns": [
				{ "name": "storage.type.sald", "match": "\\b(let|const|fun|class|namespace|enum)\\b" },
				{ "name": "variable.language.this.sald", "match": "\\b(self|super)\\b" }
			]
		},
		"constants": {
			"patterns": [
				{ "name": "constant.language.boolean.true.sald", "match": "\\btrue\\b" },
				{ "name": "constant.language.boolean.false.sald", "match": "\\bfalse\\b" },
				{ "name": "constant.language.null.sald", "match": "\\bnull\\b" }
			]
		},
		"builtins": {
			"patterns": [
				{ "name": "support.class.sald", "match": "\\b(Console|Math|Date|Timer|File|Path|Json|Process|Http|Type|Number|String|Boolean|Array|Dict|Ffi|System|Regex|Channel|Promise|Crypto|Spark|WebRoutes|ApiRoutes)\\b" },
				{ "name": "support.constant.sald", "match": "\\b(PI|E|INFINITY|NEG_INFINITY|NAN)\\b" }
			]
		},
		"functions": {
			"patterns": [
				{
					"match": "\\b(fun)\\s+([a-zA-Z_][a-zA-Z0-9_]*)\\s*\\(",
					"captures": {
						"1": { "name": "storage.type.function.sald" },
						"2": { "name": "entity.name.function.sald" }
					}
				},
				{
					"name": "entity.name.function.sald",
					"match": "\\b([a-zA-Z_][a-zA-Z0-9_]*)\\s*(?=\\()"
				}
			]
		},
		"classes": {
			"patterns": [
				{
					"match": "\\b(class|namespace|enum)\\s+([a-zA-Z_][a-zA-Z0-9_]*)",
					"captures": {
						"1": { "name": "storage.type.class.sald" },
						"2": { "name": "entity.name.class.sald" }
					}
				}
			]
		},
		"operators": {
			"patterns": [
				{ "name": "keyword.operator.comparison.sald", "match": "(==|!=|<=|>=|<|>)" },
				{ "name": "keyword.operator.logical.sald", "match": "(&&|\\|\\||!)" },
				{ "name": "keyword.operator.assignment.sald", "match": "(=|\\+=|-=|\\*=|/=|%=|\\?\\?=)" },
				{ "name": "keyword.operator.arithmetic.sald", "match": "(\\+|-|\\*|/|%)" },
				{ "name": "keyword.operator.ternary.sald", "match": "(\\?|:)" },
				{ "name": "keyword.operator.spread.sald", "match": "\\.\\.\\." },
				{ "name": "keyword.operator.arrow.sald", "match": "->" },
				{ "name": "keyword.operator.nullish.sald", "match": "\\?\\?" }
			]
		},
		"punctuation": {
			"patterns": [
				{ "name": "punctuation.separator.comma.sald", "match": "," },
				{ "name": "punctuation.terminator.semicolon.sald", "match": ";" },
				{ "name": "punctuation.accessor.sald", "match": "\\." },
				{ "name": "punctuation.bracket.round.sald", "match": "[()]" },
				{ "name": "punctuation.bracket.square.sald", "match": "[\\[\\]]" },
				{ "name": "punctuation.bracket.curly.sald", "match": "[{}]" }
			]
		},
		"identifiers": {
			"match": "\\b[a-zA-Z_][a-zA-Z0-9_]*\\b",
			"name": "variable.other.sald"
		}
	}
}